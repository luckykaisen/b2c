<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper SYSTEM "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.atguigu.dao.SpuInfoDao">

	<select id="query_spu_all_info" resultMap="OBJECT_T_MALL_VALUE_MAP">
		select p.shp_mch as shp_mch,attr.shxm_mch as shxm_mch, v1.shxzh_mch as shxzh_mch,v1.shxzh as shxzh ,p.shp_msh as shp_msh from t_mall_product p inner join t_mall_sku_attr_value v on p.id = v.shp_id

		left join t_mall_attr attr on v.shxm_id = attr.Id

		left join t_mall_value v1 on v.shxzh_id = v1.Id
	</select>
	
	<resultMap type="com.atguigu.bean.MODEL_OBJECT_T_MALL_VALUE" id="OBJECT_T_MALL_VALUE_MAP" autoMapping="true">
		<result column="shp_mch" property="shp_mch"/>
		<result column="shp_msh" property="shp_msh"/>
		<collection property="list_value" ofType="com.atguigu.bean.OBJECT_T_MALL_VALUE" autoMapping="true">
			<result column="shxm_mch" property="shxm_mch"/>
			<result column="shxzh_mch" property="shxzh_mch"/>
			<result column="shxzh" property="shxzh"/>
		</collection>
	</resultMap>

	
	<select id="query_spu_info_by_id" resultType="com.atguigu.bean.T_MALL_PRODUCT">
		select * from t_mall_product where id = #{id}
	</select>
</mapper>
